# if audio is choppy, increase quantum (2k -> 8k ... at the cost of latency):
pw-metadata -n settings 0 clock.force-quantum $((8*1024))
# and / or:
systemctl --user stop    filter-chain
systemctl --user disable filter-chain
systemctl --user mask    filter-chain

# preview what's on in audio world
pw-top

# install all compatibility plugins + BTLE support
apt install \
  pipewire \
  pipewire-audio-client-libraries \
  pipewire-alsa \
  pipewire-pulse \
  pipewire-jack \
  pipewire-v4l2 \
  libspa-0.2-libcamera \
  libspa-0.2-bluetooth

apt purge     pulseaudio
apt-mark hold pulseaudio


# restart config (note: needs to be ran as user!)
systemctl --user restart pipewire pipewire-pulse wireplumber

# disabled auto-switch to BTLS by default (save in ~/.local/state/wireplumber/)
wpctl settings        bluetooth.autoswitch-to-headset-profile false
wpctl settings --save bluetooth.autoswitch-to-headset-profile false

# show settings with wireplumber
wpctl settings

# graphical tool for connecting inputs and outputs
qpwgraph
